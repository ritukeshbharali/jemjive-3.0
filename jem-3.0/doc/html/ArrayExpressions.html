
<!-- Generated on Fri 20 Dec 14:45:31 CET 2019.
     CHANGES TO THIS FILE WILL BE LOST. -->
<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Jem reference manual: Array expressions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Jem reference manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a> expressions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Jem provides a set of overloaded operators and functions for writing expressions that operate on all elements of one or more arrays. These operators and functions return special array objects, called <em>array expressions</em>, that can be assigned to regular <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> objects. <a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a> expressions can also be passed to the overloaded operators and functions to create new array expressions.</p>
<p>Here is an example:</p>
<div class="fragment"><div class="line">Array&lt;double,2&gt; a ( 10, 10 );</div>
<div class="line">Array&lt;double,2&gt; b ( 10, 10 );</div>
<div class="line">Array&lt;double,2&gt; c ( 10, 10 );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// init a ...</span></div>
<div class="line"> </div>
<div class="line">b = 1.0 + sin( a );</div>
<div class="line">c = a * a + pow( b, 2.0 );</div>
</div><!-- fragment --><p>This code fragment is equivalent with:</p>
<div class="fragment"><div class="line">Array&lt;double,2&gt; a ( 10, 10 );</div>
<div class="line">Array&lt;double,2&gt; b ( 10, 10 );</div>
<div class="line">Array&lt;double,2&gt; c ( 10, 10 );</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> i, j;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// init a ...</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> ( j = 0; j &lt; 10; j++ )</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">for</span> ( i = 0; i &lt; 10; i++ )</div>
<div class="line">  {</div>
<div class="line">    b(i,j) = 1.0 + sin( a(i,j) );</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> ( j = 0; j &lt; 10; j++ )</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">for</span> ( i = 0; i &lt; 10; i++ )</div>
<div class="line">  {</div>
<div class="line">    c(i,j) = a(i,j) * a(i,j) + pow( b(i,j), 2.0 );</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>An array expression can be viewed as a compound object that comprises a set of operators and functions, and a set of operands. The latter set consists of <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> objects, scalars and other array expression objects. For instance, the array expression <code>(1.0 + sin(a))</code> consists of the <code>+</code> operator, the scalar <code>1.0</code> and the array expression <code>sin(a)</code>. This last expression comprises the function <code>sin</code> and the <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> object <code>a</code>.</p>
<p>An array expression can also be viewed as a type of array that has the same shape as its operands. The elements of an array expression are obtained by applying its operators and functions to the elements of its operands. Thus, the element <em>(i,j)</em> of the array expression <code>(1.0 + sin(a))</code> equals <code>(1.0 + sin(a(i,j)))</code>. Note that this implies that all operators and functions are applied <em>element-wise</em>. This also implies that all operands of an array expression must have the same shape.</p>
<p>If a scalar, such as <code>1.0</code>, is one of the operands of an array expression, it is implicitly converted to an array-like object that has the same shape as the other operands involved in the array expression. The elements of this array-like object are all equal to the scalar.</p>
<p><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a> expressions come in two flavors: <em>rvalue</em> array expressions and <em>lvalue</em> array expressions. An rvalue expression can only be used as the right-hand side in an assignment statement or as the input parameter of a function. An lvalue array expression, on the other hand, can also be used as the left-hand side in an assignment statement and as the output parameters of a function. Note that an lvalue expression can also be used as an rvalue expression.</p>
<p>Almost all overloaded functions and operators provided by jem create rvalue array expressions. At this time, only the <code><a class="el" href="namespacejem.html#a71ebf2ad61c0b33e58b9091f079b1612" title="Selects a section of a one-dimensional array.">select()</a></code> function creates lvalue array expressions. For more information, see the page on <a class="el" href="group__ArraySelections.html">array selections</a>.</p>
<p>The use of array expressions is often more efficient than writing a series of equivalent (nested) loops. One reason is that the implementation of array expressions is based on &lsquo;expression templates&rsquo;, a technique that makes it possible to avoid creating temporary array objects (see the papers available at <a href="http://oonumerics.org">http://oonumerics.org</a> for the details). Another reason is that array expressions collapse multiple nested loops into a single loop in the common case that all the operands are stored contiguously in memory. For instance, the statement</p>
<div class="fragment"><div class="line">b = 1.0 + sin(a);</div>
</div><!-- fragment --><p>in the previous example will expand to:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span> ( i = 0; i &lt; 100; i++ )</div>
<div class="line">{</div>
<div class="line">  b.setFast( i, 1.0 + sin( a.getFast(i) ) );</div>
<div class="line">}</div>
</div><!-- fragment --><p>The following sections provide an overview of the overloaded operators and functions that can be used to create array expressions.</p>
<h1><a class="anchor" id="UnaryArrayOperators"></a>
Unary operators</h1>
<p><code>#include &lt;jem/base/array/operators.h&gt;</code> <b>or</b> <br  />
 <code>#include &lt;jem/base/Array.h&gt;</code>.</p>
<p>Supported unary operators:</p>
<ul>
<li><code>-</code> (unary minus) </li>
<li><code>!</code> (logical not) </li>
<li><code>~</code> (bitwise not)</li>
</ul>
<p>These operators can be called with either an <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> object or an array expression. Each returns an rvalue array expression that applies the unary operator to the elements of the array argument. The elements of the array expression are of the same type as the elements of the array argument.</p>
<p>The unary operators are defined in the header file <code>&lt;jem/base/array/operators.h&gt;</code>. They are also available through the general header file <code>&lt;jem/base/Array.h&gt;</code>.</p>
<h1><a class="anchor" id="BinaryArrayOperators"></a>
Binary operators</h1>
<p><code>#include &lt;jem/base/array/operators.h&gt;</code> <b>or</b> <br  />
 <code>#include &lt;jem/base/Array.h&gt;</code>.</p>
<p>Supported binary arithmetic operators:</p>
<ul>
<li><code>+</code> (addition) </li>
<li><code>-</code> (substraction) </li>
<li><code>*</code> (multiplication) </li>
<li><code>/</code> (division) </li>
<li><code>%</code> (modulo division)</li>
</ul>
<p>Supported binary bitwise operators:</p>
<ul>
<li><code></code>| (bitwise or) </li>
<li><code>^</code> (bitwise xor) </li>
<li><code>&amp;</code> (bitwise and) </li>
<li><code>&lt;&lt;</code> (left shift) </li>
<li><code>&gt;&gt;</code> (right shift)</li>
</ul>
<p>Supported binary logical operators:</p>
<ul>
<li><code>||</code> (logical or) </li>
<li><code>&amp;&amp;</code> (logical and)</li>
</ul>
<p>Supported comparison operators:</p>
<ul>
<li><code>&lt;</code> (less than) </li>
<li><code>&lt;=</code> (less equal) </li>
<li><code>&gt;</code> (greater than) </li>
<li><code>&gt;=</code> (greater equal) </li>
<li><code>==</code> (equal) </li>
<li><code>!=</code> (not equal)</li>
</ul>
<p>All the operators listed above can be called with two <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> objects, two array expressions, or one <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> object and one array expression. They can also be called with an <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> object and a scalar, or an array expression and a scalar. They return an rvalue array expression that applies the operator to the elements of the array arguments and/or scalar argument. The elements of the array arguments and/or the scalar argument must be of the same type; one can not, for instance, add an integer array to a floating point array.</p>
<p>All operators except the comparison operators return an array expression of which the elements are of the same type as the elements of the array arguments and/or scalar argument. The comparison operators return an array expression of which the elements are of type <code>bool</code>.</p>
<p>The binary operators are defined in the header file <code>&lt;jem/base/array/operators.h&gt;</code>. They are also available through the general header file <code>&lt;jem/base/Array.h&gt;</code>.</p>
<h1><a class="anchor" id="UnaryArrayFunctions"></a>
Unary functions</h1>
<p><code>#include &lt;jem/base/array/intrinsics.h&gt;</code> <b>or</b> <br  />
 <code>#include &lt;jem/base/Array.h&gt;</code>.</p>
<p>The following unary functions can be called with an <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> object or an array expression:</p>
<ul>
<li><code>abs</code> </li>
<li><code>acos</code> </li>
<li><code>asin</code> </li>
<li><code>atan</code> </li>
<li><code>ceil</code> </li>
<li><code>cos</code> </li>
<li><code>cosh</code> </li>
<li><code>exp</code> </li>
<li><code>floor</code> </li>
<li><code>log</code> </li>
<li><code>log10</code> </li>
<li><code>sin</code> </li>
<li><code>sinh</code> </li>
<li><code>sqrt</code> </li>
<li><code>tan</code> </li>
<li><code>tanh</code> </li>
</ul>
<p>Each function returns an rvalue array expression that applies the function to the elements of the array argument. The elements of the array expression are of the same type as the elements of the array argument.</p>
<p>The unary functions listed above are defined in the header file <code>&lt;jem/base/array/intrinsics.h&gt;</code>. They are also available through the general header file <code>&lt;jem/base/Array.h&gt;</code>.</p>
<h1><a class="anchor" id="BinaryArrayFunctions"></a>
Binary functions</h1>
<p><code>#include &lt;jem/base/array/intrinsics.h&gt;</code> <b>or</b> <br  />
 <code>#include &lt;jem/base/Array.h&gt;</code>.</p>
<p>The binary function <code>pow</code> can be called with two <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> objects, two array expressions, or one <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> object and one array expression. It can also be called with an <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> object and a scalar, or an array expression and a scalar. The <code>pow</code> function returns an rvalue array expression that applies the <code>pow</code> function to all elements of the array arguments and/or scalar argument. The elements of the returned array expression are of the same type as the elements of the array arguments and/or scalar argument.</p>
<p>The <code>pow</code> funtion is defined in the header file <code>&lt;jem/base/array/intrinsics.h&gt;</code>. It is also available through the general header file <code>&lt;jem/base/Array.h&gt;</code>.</p>
<h1><a class="anchor" id="OtherArrayFunctions"></a>
Other functions</h1>
<p><code>#include &lt;jem/base/array/intrinsics.h&gt;</code> <b>or</b> <br  />
 <code>#include &lt;jem/base/Array.h&gt;</code>.</p>
<p>Two other functions that create rvalue array expressions are <code>castTo</code> and <code>where</code>. The first one can be used to convert the elements of an array from one type to another type. It is called like this:</p>
<p><code>castTo&lt;T&gt; ( a )</code></p>
<p>where <code>T</code> is the target type of the conversion, and <code>a</code> is an <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> or an array expression. The <code>castTo</code> function returns an rvalue array expression that applies the <code>static_cast&lt;T&gt;</code> operator to all the elements of the array argument. The elements of the returned array expression are of type <code>T</code>.</p>
<p>Example:</p>
<div class="fragment"><div class="line">Array&lt;float,2&gt; a ( 10, 10 );</div>
<div class="line">Array&lt;int,2&gt;   b ( 10, 10 );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// init a ...</span></div>
<div class="line"> </div>
<div class="line">b = castTo&lt;int&gt; ( a )</div>
</div><!-- fragment --><p>which is the same as:</p>
<div class="fragment"><div class="line">Array&lt;float,2&gt; a ( 10, 10 );</div>
<div class="line">Array&lt;int,2&gt;   b ( 10, 10 );</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> i, j;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// init a ...</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> ( j = 0; j &lt; 10; j++ )</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">for</span> ( i = 0; i &lt; 10; i++ )</div>
<div class="line">  {</div>
<div class="line">    b(i,j) = static_cast&lt;int&gt; ( a(i,j) );</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The function <code>where</code> mimicks the conditional operator <code>(?:)</code>. It is called as follows:</p>
<p><code>where ( mask, lhs, rhs )</code></p>
<p>where <code>mask</code> is an <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> object or an array expression with elements of type <code>bool</code>. The arguments <code>lhs</code> and <code>rhs</code> should be <code><a class="el" href="classjem_1_1Array.html" title="Implements a multi-dimensional array that supports slicing and array expressions.">Array</a></code> objects, array expressions, scalars, or a combination of these. The <code>where</code> function returns an rvalue array expression that applies the conditional <code>(?:)</code> operator to all the elements of its three arguments. The elements of the array expression are of the same type as the elements of the array arguments and/or scalar arguments.</p>
<p>Example:</p>
<div class="fragment"><div class="line">Array&lt;float,2&gt; a ( 10, 10 );</div>
<div class="line">Array&lt;float,2&gt; b ( 10, 10 );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// init a ...</span></div>
<div class="line"> </div>
<div class="line">b = <a class="code" href="namespacejem.html#a5d7fd24bdfd2412b5af79209b7cff094">where</a> ( a &gt; 1.0, a, 0.0 );</div>
</div><!-- fragment --><p>which is equivalent with:</p>
<div class="fragment"><div class="line">Array&lt;float,2&gt; a ( 10, 10 );</div>
<div class="line">Array&lt;float,2&gt; b ( 10, 10 );</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> i, j;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// init a ...</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> ( j = 0; j &lt; 10; j++ )</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">for</span> ( i = 0; i &lt; 10; i++ )</div>
<div class="line">  {</div>
<div class="line">    b(i,j) = ( a(i,j) &gt; 1.0 ) ? a(i,j) : 0.0;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The funtions <code>castTo</code> and <code>where</code> are defined in the header file <code>&lt;jem/base/array/intrinsics.h&gt;</code>. They are also available through the general header file <code>&lt;jem/base/Array.h&gt;</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="anamespacejem_html_a5d7fd24bdfd2412b5af79209b7cff094"><div class="ttname"><a href="namespacejem.html#a5d7fd24bdfd2412b5af79209b7cff094">jem::where</a></div><div class="ttdeci">Array&lt; typename PromoteTypes&lt; T, U &gt;::ResultType, N, WhereExpr&lt; Array&lt; bool, N, E1 &gt;, Array&lt; T, N, E2 &gt;, Array&lt; U, N, E3 &gt; &gt; &gt; where(const Array&lt; bool, N, E1 &gt; &amp;mask, const Array&lt; T, N, E2 &gt; &amp;lhs, const Array&lt; U, N, E3 &gt; &amp;rhs)</div><div class="ttdef"><b>Definition:</b> intrinsics.h:151</div></div>

<!-- Generated on Fri 20 Dec 14:45:31 CET 2019.
     CHANGES TO THIS FILE WILL BE LOST. -->
<hr class="footer"/>
<div class="footer">
  <a href="http://www.dynaflow.com">
    <img class="logo" align="left" src="logo.png"
      width="218" height="25" alt="logo" border="null"/>
  </a>
  <div align="right">
    <small>
      Generated on Fri Dec 20 2019 14:45:32 by Doxygen
    </small>
  </div>
</div>
</body>
</html>
